{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/introduction/introduction.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["/**\r\n * @license MIT\r\n * @version 1.1.0\r\n * @author M.A.R.S. Labs\r\n */\r\n\r\nimport { NgModule } from \"@angular/core\";\r\nimport { HomePage} from \"./home\";\r\nimport { IonicPageModule } from \"ionic-angular\";\r\nimport { ComponentsModule } from \"@components/components.module\";\r\nimport { DirectivesModule } from \"@directives/directives.module\";\r\nimport { PipesModule } from \"@pipes/pipes.module\";\r\n\r\n@NgModule({\r\n  declarations: [HomePage],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n    ComponentsModule,\r\n    DirectivesModule,\r\n    PipesModule,\r\n    ],\r\n})\r\nexport class HomePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","/**\n * @license MIT\n * @version 1.1.0\n * @author M.A.R.S. Labs\n */\n\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef } from \"@angular/core\";\nimport { ViewChild } from \"@angular/core\";\nimport { App, Platform, NavController } from \"ionic-angular\";\nimport { IonicPage } from \"ionic-angular\";\nimport { Slides } from \"ionic-angular\";\n\nimport { AppGlobals } from \"@app/app.globals\";\nimport { AppLocales } from \"@app/app.locales\";\nimport { AppConstants } from \"@app/app.constants\";\nimport { MarsNavigationService } from \"@services/navigation.service\";\nimport { MarsAuthService } from \"@services/auth.service\";\n\n@IonicPage({\n    segment: \"intro\"\n})\n@Component({\n    selector: \"page-introduction\",\n    templateUrl: \"introduction.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\n\nexport class IntroductionPage {\n\n    navigationService: MarsNavigationService;\n\n    @ViewChild(\"slides\") slides: Slides;\n    contents: Array<any>;\n    translations: AppTranslations;\n    showStart: boolean;\n    customerSteps = [\n        { icon: 'pin', text: 'customer_app_step_one' },\n        { icon: 'cash', text: 'customer_app_step_two' },\n        { icon: 'cart', text: 'customer_app_step_three' },\n        { icon: 'paper-plane', text: 'customer_app_step_four' },\n        { icon: 'checkbox-outline', text: 'customer_app_step_five' },\n    ];\n    merchantSteps = [\n        { icon: 'pin', text: 'merchant_app_step_one' },\n        { icon: 'cart', text: 'merchant_app_step_two' },\n        { icon: 'wifi', text: 'merchant_app_step_three' },\n        { icon: 'stats', text: 'merchant_app_step_four' },\n        { icon: 'trending-up', text: 'merchant_app_step_five' },\n    ];\n\n    static INTRODUCTION_STATUS = AppConstants.NAME.toUpperCase() + \"_INTRODUCTION_STATUS\";\n\n    constructor(private platform: Platform,\n        private changeDetector: ChangeDetectorRef,\n        private app: App,\n        private locales: AppLocales,\n        private navCtrl: NavController,\n        private authService: MarsAuthService,\n        private globals: AppGlobals) {\n        this.navigationService = new MarsNavigationService(this.app);\n        this.navigationService.setNavCtrl(this.navCtrl);\n        this.translations = this.locales.load();\n        this.contents = [\n            {\n                picture: 'assets/images/introduction/1.jpg'\n            },\n            {\n                picture: 'assets/images/introduction/2.jpg'\n            }\n        ]\n    }\n\n    ionViewCanEnter() {\n        if (MarsAuthService.isLoggedIn()) {\n            this.navigationService.setRoot('HomePage');\n            return false;\n        }\n    }\n\n    ionViewWillEnter() {\n        /* if (localStorage[IntroductionPage.INTRODUCTION_STATUS]) this.navigationService.setRoot('HomePage'); */\n    }\n\n    ionViewDidEnter() {\n        this.init();\n    }\n\n    ionViewDidLeave() {\n    }\n\n    init() {\n        localStorage[IntroductionPage.INTRODUCTION_STATUS] = \"already_seen\";\n        /*         setTimeout(() => {\n                 let swiper = this.slides.getNativeElement();\n                 let distance = 0;\n                 let shouldSwipe = (e) => {\n                     distance = e.deltaY;\n                     if (distance > 100)\n                         this.slides.slideNext();\n                     if (distance < -100)\n                         this.slides.slidePrev();\n                 };\n                 // swiper.addEventListener(\"mousewheel\", shouldSwipe);\n                 swiper.addEventListener(\"wheel\", shouldSwipe);\n             }, 1000); */\n\n        setTimeout(() => {\n            this.showStart = true;\n        }, 2000);\n    }\n\n    skipIntro() {\n\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/introduction/introduction.ts","/**\r\n * @license MIT\r\n * @version 1.1.0\r\n * @author M.A.R.S. Labs\r\n */\r\n\r\nimport { Component, ChangeDetectionStrategy, NgZone, ChangeDetectorRef } from \"@angular/core\";\r\n\r\nimport { App, NavController, Platform, ViewController, Tabs, NavParams } from \"ionic-angular\";\r\nimport { IonicPage } from \"ionic-angular\";\r\n\r\nimport { AppConstants } from \"@app/app.constants\";\r\n\r\nimport { MarsCartService } from \"@services/cart.service\";\r\nimport { MarsAuthService } from \"@services/auth.service\";\r\nimport { AppGlobals } from '@app/app.globals';\r\n\r\nimport { MarsSocket } from \"@app/app.socket\";\r\nimport { Backend } from \"@backend/index\";\r\nimport { IntroductionPage } from \"@pages/introduction/introduction\";\r\nimport { MarsNavigationService } from \"@services/navigation.service\";\r\nimport { MarsGeolocationService } from \"@services/geolocation/geolocation.service\";\r\nimport { MarsInteractionService } from \"@services/interaction.service\";\r\nimport { AppLocales } from \"@app/app.locales\";\r\n\r\n@IonicPage({\r\n    segment: \"home/:package\"\r\n})\r\n@Component({\r\n    selector: \"page-home\",\r\n    templateUrl: \"home.html\"\r\n})\r\n\r\nexport class HomePage {\r\n\r\n    translations: AppTranslations;\r\n    package: string;\r\n    navigationService: MarsNavigationService;\r\n    screenIsDesktopSized = window.innerWidth > 768;\r\n    token: string;\r\n\r\n    constructor(private platform: Platform,\r\n        private app: App,\r\n        private zone: NgZone,\r\n        private changeDetector: ChangeDetectorRef,\r\n        private globals: AppGlobals,\r\n        private locales: AppLocales,\r\n        private navCtrl: NavController,\r\n        private navParams: NavParams,\r\n        private cartService: MarsCartService,\r\n        private interactionService: MarsInteractionService,\r\n        private geolocationService: MarsGeolocationService) {\r\n        this.init();\r\n        this.translations = this.locales.load();\r\n        this.navigationService = new MarsNavigationService(app);\r\n        this.navigationService.setNavCtrl(this.navCtrl);\r\n        platform.ready().then(() => {\r\n            if (platform.is(\"cordova\")) { // Okay, so the platform is ready and our plugins are available.\r\n                /*  splashscreen.hide();\r\n                 statusbar.show();\r\n                 statusbar.backgroundColorByHexString(AppConstants.DARKER_primary_color); */\r\n            }\r\n        });\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        let isFirstAccess = MarsAuthService.isLoggedIn() && !localStorage[IntroductionPage.INTRODUCTION_STATUS];\r\n        if (isFirstAccess) this.navigationService.setRoot(\"IntroductionPage\");\r\n    }\r\n\r\n    ionViewWillEnter() {\r\n        this.navParams.data.package = this.navParams.data.package || AppConstants.SUBPACKAGE || \"customer\";\r\n        this.package = this.navParams.data.package;\r\n        this.globals.package =  this.navParams.data.package;\r\n    }\r\n\r\n    async init() {\r\n        if (MarsAuthService.isLoggedIn()) {\r\n            this.token = MarsAuthService.getMarsToken();\r\n            MarsSocket.connect(AppConstants.SOCKET_SERVER_ADDRESS);\r\n            await this.refreshUser();\r\n            if (MarsAuthService.hasRole(\"MERCHANT\")) this.initMerchant();\r\n            if (MarsAuthService.hasRole(\"CUSTOMER\")) this.initCustomer();\r\n            this.changeDetector.detectChanges();\r\n        }\r\n    }\r\n\r\n    initMerchant() {\r\n        let user = MarsAuthService.getLoggedInUser();\r\n        if (user.payment && user.payment.hasDelayedPayments) this.interactionService.alert(this.translations.whoops_you_have_delayed_payments);\r\n        MarsSocket.on('connect', () => {\r\n            this.refreshNotifications();\r\n            MarsSocket.join(user._id);\r\n            MarsSocket.on('new order', async (notification) => {\r\n                await this.getPendingOrders();\r\n                await this.refreshNotifications();\r\n                this.changeDetector.detectChanges();\r\n            });\r\n            MarsSocket.on('notifications update', async (notification) => await this.refreshNotifications());\r\n        });\r\n    }\r\n\r\n    async initCustomer() {\r\n        this.cartService.load();\r\n        MarsSocket.on('connect', () => {\r\n            this.refreshNotifications();\r\n            MarsSocket.join(MarsAuthService.getLoggedInUser()._id);\r\n            MarsSocket.on('order review', async (notification) => await this.refreshNotifications());\r\n            MarsSocket.on('notifications update', async (notification) => await this.refreshNotifications());\r\n        });\r\n        this.getPendingOrders();\r\n    }\r\n\r\n    async getPendingOrders() {\r\n        this.zone.run(async () => {\r\n            try {\r\n                let pendingOrders = (await Backend.getOrders({ xAccessToken: this.token, status: \"created\" })).data;\r\n                if (pendingOrders.length > 0) {\r\n                    this.globals.hasPendingOrders = true;\r\n                    // this.globals.disableNavigation = true;\r\n                    // this.app.getActiveNav().push(\"OrderCreationPage\");\r\n                }\r\n            } catch (e) {\r\n\r\n            } finally {\r\n                this.changeDetector.detectChanges();\r\n            }\r\n        });\r\n    }\r\n\r\n    async refreshUser() {\r\n        return new Promise(async (resolve, reject) => {\r\n            try {\r\n                let user = (await Backend.getUserProfile({ xAccessToken: this.token })).data;\r\n                MarsAuthService.setLoggedInUser(user);\r\n                MarsAuthService.setMarsToken(user.token);\r\n                if (!MarsAuthService.finishedSignup()) this.navigationService.setRoot(user.signupStep);\r\n                resolve();\r\n            } catch (e) {\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n\r\n    async refreshNotifications() {\r\n        this.zone.run(async () => {\r\n            try {\r\n                this.globals.notifications = (await Backend.getNotifications({ xAccessToken: this.token })).data;\r\n                this.vibrate();\r\n            } catch (e) {\r\n\r\n            } finally {\r\n                this.changeDetector.detectChanges();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    vibrate() {\r\n        /* if (this.platform.is('cordova')) this.vibration.vibrate(500); */\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}