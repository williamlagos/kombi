{"version":3,"sources":["../../src/packages/merchant/pages/information/selling/merchant-selling-information.module.ts","../../src/packages/merchant/pages/information/selling/merchant-selling-information.ts"],"names":[],"mappings":"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","file":"51.js","sourcesContent":["/**\n * @license MIT\n * @version 1.1.0\n * @author M.A.R.S. Labs\n */\n\nimport { NgModule } from \"@angular/core\";\nimport { MerchantSellingInformationPage } from \"./merchant-selling-information\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { ComponentsModule } from \"@components/components.module\";\nimport { DirectivesModule } from \"@directives/directives.module\";\nimport { PipesModule } from \"@pipes/pipes.module\";\nimport { CurrencyMaskModule } from \"ng2-currency-mask\";\n\n@NgModule({\n  declarations: [MerchantSellingInformationPage],\n  imports: [\n    IonicPageModule.forChild(MerchantSellingInformationPage),\n    ComponentsModule,\n    DirectivesModule,\n    PipesModule,\n    CurrencyMaskModule\n  ],\n})\nexport class MerchantSellingInformationPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/packages/merchant/pages/information/selling/merchant-selling-information.module.ts","/**\n * @license MIT\n * @version 1.1.0\n * @author M.A.R.S. Labs\n */\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\n\nimport { App, IonicPage, NavController, Platform } from \"ionic-angular\";\n\nimport { AppConstants } from \"@app/app.constants\";\nimport { AppGlobals } from \"@app/app.globals\";\nimport { AppLocales } from \"@app/app.locales\";\n\nimport { MarsAuthService } from \"@services/auth.service\";\nimport { MarsInteractionService } from \"@services/interaction.service\";\nimport { MarsNavigationService } from \"@services/navigation.service\";\n\nimport { Backend } from \"@backend/index\";\nimport { AppUserPages } from \"@pages/user-pages\";\n\n@IonicPage({\n    segment: \"partner-selling-information\"\n})\n@Component({\n    selector: \"page-merchant-selling-information\",\n    templateUrl: \"merchant-selling-information.html\",\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MerchantSellingInformationPage {\n\n    navigationService: MarsNavigationService;\n    translations: AppTranslations;\n    CURRENCY_OPTIONS = AppConstants.CURRENCY_OPTIONS;\n    paymentModes;\n    previousStep: string;\n    nextStep: string;\n    userDataForm;\n    spinner: any;\n    user: any = {\n        documents: [{}],\n        delivery: {\n            area: \"\"\n        }\n    };\n\n    constructor(private platform: Platform,\n        private app: App,\n        private navCtrl: NavController,\n        private zone: NgZone,\n        private changeDetector: ChangeDetectorRef,\n        private locales: AppLocales,\n        private authService: MarsAuthService,\n        private globals: AppGlobals,\n        private userInformationPages: AppUserPages,\n        private interactionService: MarsInteractionService) {\n        this.navigationService = new MarsNavigationService(this.app as any);\n        this.navigationService.setNavCtrl(this.navCtrl as any);\n        this.translations = this.locales.load();\n    }\n\n    ionViewWillEnter() {\n        // In case the user is logged in\n        if (this.authService.isLoggedIn()) this.user = this.authService.getLoggedInUser();\n        // In case the user returned after starting the signup process\n        this.nextStep = this.userInformationPages.getNextStepFor(this.user.roles, \"MerchantSellingInformationPage\");\n        this.previousStep = this.userInformationPages.getPreviousStepFor(this.user.roles, \"MerchantSellingInformationPage\");\n        if (!this.authService.finishedSignup()) this.user.signupStep = this.nextStep;\n        this.getPaymentModes();\n    }\n\n    ionViewDidEnter() {\n        setTimeout(() => { this.changeDetector.detectChanges(); }, 200);\n    }\n\n    async getPaymentModes() {\n        try {\n            this.paymentModes = (await Backend.getPaymentModes()).data;\n            this.paymentModes = this.paymentModes.filter((mode, index) => mode && !(mode.value == \"CASH\"));\n        } catch (e) {\n            this.interactionService.alert(this.translations.server_failure);\n            this.navigationService.goBack();\n        } finally {\n            this.changeDetector.detectChanges();\n        }\n    }\n\n    disableNextFor(form): boolean {\n        return !form.valid;\n    }\n\n    async save() {\n        try {\n            this.spinner = this.interactionService.spinner({ content: `${this.translations.loading}...` });\n            let isLoggedIn = this.authService.isLoggedIn();\n            let user = isLoggedIn ? (await Backend.updateUser({ user: this.user, xAccessToken: MarsAuthService.getMarsToken() })).data : (await Backend.createUser({ user: this.user })).data;\n            this.storeDataFor(user);\n            return MarsAuthService.finishedSignup() ? this.navigationService.goBack() : this.navigationService.goTo(this.nextStep);\n        } catch (e) {\n            this.interactionService.alert(this.translations.server_failure);\n        } finally {\n            this.spinner.dismiss();\n            this.changeDetector.detectChanges();\n        }\n    }\n\n    storeDataFor(user) {\n        MarsAuthService.setLoggedInUser(user);\n        MarsAuthService.setMarsToken(user.token);\n    }\n\n    goBack() {\n        this.navigationService.setRoot(this.previousStep);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/packages/merchant/pages/information/selling/merchant-selling-information.ts"],"sourceRoot":""}