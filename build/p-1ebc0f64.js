import{B as s,T as a}from"./p-65d8e78f.js";const t="localhost"===(window&&window.location&&window.location.hostname)?"http://localhost:3000":"https://api.shipping.net",e=(e,o)=>async n=>{const c=e.files;s.setDomain(t);const i=await(await s.addPicture({xAccessToken:o,files:c})).json();return e.pictures=i.map((s=>s._id)),await s.createOrder({xAccessToken:o,order:e}),n({type:a.REGISTER_ORDER})},o=e=>async o=>{s.setDomain(t);const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=JSON.parse(window.atob(n))._id,i=await(await s.getOrders({xAccessToken:e})).json(),r=i.map((s=>s.pictures)).flat(),w=await(await s.getPictures({xAccessToken:e,ids:r.flat()})).json(),d=i.map((async a=>{if(a.bids.length>0){const t=(await(await s.getOrderBids({xAccessToken:e,order:a._id})).json()).filter((s=>c===s.user._id));a.placed=t.length>0}for(let s=0;s<w.length;s++){const t=a.pictures.indexOf(w[s]._id);-1!==t&&(a.pictures[t]=w[s])}return a})),p=await Promise.all(d);return o({type:a.MY_ORDERS,orders:p})},n=(e,o)=>async n=>{s.setDomain(t);const c=await(await s.getOrderBids({xAccessToken:e,order:o})).json();return n({type:a.ORDER_BIDS,bids:c})},c=(e,o,n)=>async c=>(s.setDomain(t),await s.setOrderMerchant({xAccessToken:n,id:o,merchant:e}),c({type:a.ORDER_MERCHANT}));export{n as a,c as b,e as r,o as s}