import{f as t,g as s,h as a}from"./p-011655de.js";const e=new class{constructor(){this.favorites=new Set}hasFavorite(t){return this.favorites.has(t)}addFavorite(t){this.favorites.add(t)}removeFavorite(t){this.favorites.delete(t)}async login(s){await t("hasLoggedIn",!0),await this.setUsername(s),window.dispatchEvent(new Event("user:login"))}async signup(s){await t("hasLoggedIn",!0),await this.setUsername(s),window.dispatchEvent(new Event("user:signup"))}async logout(){await s("hasLoggedIn"),await s("username"),window.dispatchEvent(new Event("user:logout"))}async setUsername(s){await t("username",s)}async getUsername(){return a("username")}async isLoggedIn(){return!0===await a("hasLoggedIn")}async hasSeenTutorial(s){return t("hasSeenTutorial",s)}async checkHasSeenTutorial(){return!!await a("hasSeenTutorial")}},n=new class{constructor(t){this.user=t}async load(){if(this.data)return this.data;{const t=await fetch("/assets/data/data.json"),s=await t.json();return this.processData(s)}}processData(t){return this.data=t,this.data.tracks=[],this.data.schedule.forEach((t=>{t.groups.forEach((t=>{t.sessions.forEach((t=>{t.speakers=[],t.speakerNames&&t.speakerNames.forEach((s=>{const a=this.data.speakers.find((t=>t.name===s));a&&(t.speakers.push(a),a.sessions=a.sessions||[],a.sessions.push(t))})),t.tracks&&t.tracks.forEach((t=>{this.data.tracks.indexOf(t)<0&&this.data.tracks.push(t)}))}))}))})),this.data}async getTimeline(t,s="",a=[],e="all"){const n=(await this.load()).schedule[t];n.shownSessions=0;const i=(s=s.toLowerCase().replace(/,|\.|-/g," ")).split(" ").filter((t=>!!t.trim().length));return n.groups.forEach((t=>{t.hide=!0,t.sessions.forEach((s=>{this.filterSession(s,i,a,e),s.hide||(t.hide=!1,n.shownSessions++)})),this.mapFavorites(t.sessions)})),n}mapFavorites(t){t.map((t=>{t.isFavorite=this.user.hasFavorite(t.name)}))}async getSession(t){const s=await this.load();for(const a of s.schedule)for(const s of a.groups)for(const a of s.sessions)if(a.id===t)return a;return null}filterSession(t,s,a,e){let n=!1;s.length?s.forEach((s=>{t.name.toLowerCase().indexOf(s)>-1&&(n=!0)})):n=!0;let i=!1;t.tracks.forEach((t=>{-1===a.indexOf(t)&&(i=!0)}));let r=!1;"favorites"===e?this.user.hasFavorite(t.name)&&(r=!0):r=!0,t.hide=!(n&&i&&r)}async getSpeakers(){return(await this.load()).speakers.sort(((t,s)=>{const a=t.name.split(" ").pop(),e=s.name.split(" ").pop();return a.localeCompare(e)}))}async getSpeaker(t){const s=await this.load();for(const a of s.speakers)if(a.id===t)return a;return null}async getTracks(){return(await this.load()).tracks.sort()}async getMap(){return(await this.load()).map}}(e);export{n as C,e as U}