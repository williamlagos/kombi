import{r as t}from"./p-5a3a7011.js";import{u as i}from"./p-011655de.js";import"./p-65d8e78f.js";const e=class{constructor(i){t(this,i),this.submitted=!1,this.username={valid:!1,value:""},this.password={valid:!1,value:""},this.data={}}componentWillLoad(){this.store.mapStateToProps(this,(t=>{const{session:{token:i,profile:e}}=t;return{token:i,profile:e}})),this.store.mapDispatchToProps(this,{updateProfile:i})}handleInput(t){this.data[t.target.name]=t.target.value}handleRadio(t){this.data[t.target.name]=[t.target.value]}handleFile(t){this.data.files=[t[0]]}handleAddress(t){this.data.address={street:t.target.value}}handleUsername(t){this.validateUsername(),this.username=Object.assign(Object.assign({},this.username),{value:t.target.value})}handlePassword(t){this.validatePassword(),this.password.value=t.target.value,this.password=Object.assign(Object.assign({},this.password),{value:t.target.value})}validateUsername(){this.username=Object.assign(Object.assign({},this.username),this.username.value&&this.username.value.length>0?{valid:!0}:{valid:!1})}validatePassword(){if(this.password.value&&this.password.value.length>0)return this.password.valid=!0,void(this.password=Object.assign(Object.assign({},this.password),{valid:!0}));this.password=Object.assign(Object.assign({},this.password),{valid:!1})}unload(t){t.preventDefault(),this.exit()}async submit(t){t.preventDefault();const i=Object.assign(Object.assign({},this.data),{username:""!==this.username.value?this.username.value:this.profile.username});await this.updateProfile(i,this.token),(await this.toastCtrl.create({message:"Perfil atualizado com sucesso.",duration:3e3})).present()}render(){return[h("ion-header",null,h("ion-toolbar",null,h("ion-buttons",{slot:"start"},h("ion-menu-button",null),h("ion-back-button",null)),h("ion-title",null,"Conta"))),h("ion-content",null,h("ion-list",null,h("div",{"padding-top":!0,"text-center":!0},h("img",{src:this.profile.hasOwnProperty("pictures")&&this.profile.pictures.length>0?this.profile.pictures[0]:"http://www.gravatar.com/avatar?d=mm&s=140",style:{maxHeight:"120px"},alt:"avatar"}),h("h2",null,this.profile.name," (",this.profile.username,")"),h("ion-list",null,h("ion-item",null,h("ion-label",{position:"stacked"},"Atualize seu nome completo"),h("ion-input",{placeholder:this.profile.name,name:"name",onInput:t=>this.handleInput(t)})),h("ion-item",null,h("ion-label",{position:"stacked"},"Atualize seu endereço"),h("ion-input",{placeholder:this.profile.address.street,name:"address",onInput:t=>this.handleAddress(t)})),h("ion-item",null,h("ion-label",{position:"stacked"},"Atualize seu telefone para contato"),h("ion-input",{placeholder:this.profile.phone,name:"phone",onInput:t=>this.handleInput(t)})),h("ion-item",null,h("ion-label",{position:"stacked"},"Substituir imagem"),h("image-uploader",{send:t=>this.handleFile(t),id:"file"})),h("ion-item",null,h("ion-label",{position:"stacked"},"Atualize seu e-mail para o login"),h("ion-input",{placeholder:this.profile.email,name:"email",onInput:t=>this.handleInput(t)})),h("ion-item",null,h("ion-label",{position:"stacked"},"Atualize o nome de usuário"),h("ion-input",{placeholder:this.profile.username,name:"username",type:"text",value:this.username.value,onInput:t=>this.handleUsername(t),required:!0})),h("ion-text",{color:"danger"},h("p",{hidden:this.username.valid||!1===this.submitted,"padding-left":!0},"Nome do usuário é requerido")),h("ion-button",{style:{flex:"1"},onClick:t=>this.submit(t),color:"primary",expand:"block"},"Atualizar")))))]}};export{e as page_account}