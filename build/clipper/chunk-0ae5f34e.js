import{a as e,b as t}from"./chunk-c46efb37.js";const s="localhost"===(window&&window.location&&window.location.hostname)?"http://localhost:3000":"https://api.shipping.net",a=(a,i)=>async(n,o)=>{const c=a.files;e.setDomain(s);const r=await(await e.addPicture({xAccessToken:i,files:c})).json();return a.pictures=r.map(e=>e._id),await e.createOrder({xAccessToken:i,order:a}),n({type:t.REGISTER_ORDER})},i=a=>async(i,n)=>{e.setDomain(s);const o=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=JSON.parse(window.atob(o))._id,r=await(await e.getOrders({xAccessToken:a})).json(),d=r.map(e=>e.pictures).flat(),p=await(await e.getPictures({xAccessToken:a,ids:d.flat()})).json(),l=r.map(async t=>{if(t.bids.length>0){const s=(await(await e.getOrderBids({xAccessToken:a,order:t._id})).json()).filter(e=>c===e.user._id);t.placed=s.length>0}for(let e=0;e<p.length;e++){const s=t.pictures.indexOf(p[e]._id);-1!==s&&(t.pictures[s]=p[e])}return t}),w=await Promise.all(l);return i({type:t.MY_ORDERS,orders:w})},n=(a,i)=>async(n,o)=>{e.setDomain(s);const c=await(await e.getOrderBids({xAccessToken:a,order:i})).json();return n({type:t.ORDER_BIDS,bids:c})},o=(a,i,n)=>async(o,c)=>(e.setDomain(s),await e.setOrderMerchant({xAccessToken:n,id:i,merchant:a}),o({type:t.ORDER_MERCHANT}));export{a,i as b,n as c,o as d};