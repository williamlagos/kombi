var __awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(c,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?c(e.value):new t(function(n){n(e.value)}).then(a,o)}s((r=r.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(e,n){var t,r,c,i,a={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(c=2&i[0]?r.return:i[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,i[1])).done)return c;switch(r=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(c=(c=a.trys).length>0&&c[c.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){a.label=i[1];break}if(6===i[0]&&a.label<c[1]){a.label=c[1],c=i;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(i);break}c[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};clipper.loadBundle("chunk-ffea8863.js",["exports","./chunk-ea768d49.js"],function(e,n){var t=this,r=(window,"localhost"===(window&&window.location&&window.location.hostname)?"http://localhost:3000":"https://wasserboxer.herokuapp.com");e.showMyOrders=function(e){return function(c,i){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.getOrders({xAccessToken:e})];case 1:return[4,i.sent().json()];case 2:return t=i.sent(),[2,c({type:n.TypeKeys.MERCHANT_ORDERS,orders:t})]}})})}},e.cancelOrder=function(e,c){return function(i,a){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.cancelOrder({xAccessToken:c,id:e})];case 1:return t.sent(),[2,i({type:n.TypeKeys.CANCEL_ORDER})]}})})}},e.rateOrder=function(e,c,i){return function(a,o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.rateOrder({xAccessToken:i,id:e,rate:c})];case 1:return t.sent(),[2,a({type:n.TypeKeys.RATE_ORDER})]}})})}},e.finishOrder=function(e,c){return function(i,a){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.finishOrder({xAccessToken:c,id:e})];case 1:return t.sent(),[2,i({type:n.TypeKeys.FINISH_ORDER})]}})})}},e.showOrder=function(e){return function(c,i){return __awaiter(t,void 0,void 0,function(){var t,i,a,o,s,u,d,l,f=this;return __generator(this,function(_){switch(_.label){case 0:return n.Backend.setDomain(r),t=e.split(".")[1],i=t.replace(/-/g,"+").replace(/_/g,"/"),a=JSON.parse(window.atob(i))._id,[4,n.Backend.getReadyOrders({xAccessToken:e})];case 1:return[4,_.sent().json()];case 2:return o=_.sent(),s=o.map(function(e){return e.pictures}).flat(),[4,n.Backend.getPictures({xAccessToken:e,ids:s.flat()})];case 3:return[4,_.sent().json()];case 4:return u=_.sent(),d=o.map(function(t){return __awaiter(f,void 0,void 0,function(){var r,c,i,o;return __generator(this,function(s){switch(s.label){case 0:return t.bids.length>0?[4,n.Backend.getOrderBids({xAccessToken:e,order:t._id})]:[3,3];case 1:return[4,s.sent().json()];case 2:r=s.sent(),c=r.filter(function(e){return a===e.user._id}),t.placed=c.length>0,s.label=3;case 3:for(i=0;i<u.length;i++)-1!==(o=t.pictures.indexOf(u[i]._id))&&(t.pictures[o]=u[i]);return[2,t]}})})}),[4,Promise.all(d)];case 5:return l=_.sent(),[2,c({type:n.TypeKeys.SHOW_ORDER,orders:l})]}})})}},e.selectOrder=function(e,c){return function(i,a){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.acceptOrder({xAccessToken:c,id:e})];case 1:return t.sent(),[2,i({type:n.TypeKeys.SELECT_ORDER})]}})})}},e.startOrder=function(e,c){return function(i,a){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.startOrder({xAccessToken:c,id:e})];case 1:return t.sent(),[2,i({type:n.TypeKeys.START_ORDER})]}})})}},e.placeOrder=function(e,c,i){return function(a,o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return n.Backend.setDomain(r),[4,n.Backend.placeBid({xAccessToken:i,bid:e,order:c})];case 1:return[4,t.sent()];case 2:return t.sent(),[2,a({type:n.TypeKeys.PLACE_ORDER,orderId:c})]}})})}}});