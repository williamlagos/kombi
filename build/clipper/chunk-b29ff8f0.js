import{a as e,b as s}from"./chunk-c46efb37.js";const t="localhost"===(window&&window.location&&window.location.hostname)?"http://localhost:3000":"https://wasserboxer.herokuapp.com",a=(a,o)=>async(i,r)=>{const c=a.files;e.setDomain(t);const n=await(await e.addPicture({xAccessToken:o,files:c})).json();return a.pictures=n.map(e=>e._id),await e.createOrder({xAccessToken:o,order:a}),i({type:s.REGISTER_ORDER})},o=a=>async(o,i)=>{e.setDomain(t);const r=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=JSON.parse(window.atob(r))._id,n=await(await e.getOrders({xAccessToken:a})).json(),d=n.map(e=>e.pictures).flat(),p=await(await e.getPictures({xAccessToken:a,ids:d.flat()})).json(),w=n.map(async s=>{if(s.bids.length>0){const t=(await(await e.getOrderBids({xAccessToken:a,order:s._id})).json()).filter(e=>c===e.user._id);s.placed=t.length>0}for(let e=0;e<p.length;e++){const t=s.pictures.indexOf(p[e]._id);-1!==t&&(s.pictures[t]=p[e])}return s}),l=await Promise.all(w);return o({type:s.MY_ORDERS,orders:l})},i=(a,o)=>async(i,r)=>{e.setDomain(t);const c=await(await e.getOrderBids({xAccessToken:a,order:o})).json();return i({type:s.ORDER_BIDS,bids:c})},r=(a,o,i)=>async(r,c)=>(e.setDomain(t),await e.setOrderMerchant({xAccessToken:i,id:o,merchant:a}),r({type:s.ORDER_MERCHANT}));export{a,o as b,i as c,r as d};